{
  "Id": "DisableLocationTracking",
  "Name": "Disable Location Tracking",
  "Description": "Disables Location Tracking...DUH!",
  "Category": "Essential Tweaks",
  "Severity": "Medium", 
  "Tags": ["privacy", "location", "tracking"],
  "CTTKey": "WPFTweaksLoc",
  "ApplyOperations": {
    "RegistryOperations": [
      {
        "Hive": "LocalMachine",
        "KeyPath": "SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\CapabilityAccessManager\\ConsentStore\\location",
        "ValueName": "Value",
        "Value": "Deny",
        "ValueType": "String",
        "Operation": "SetValue"
      },
      {
        "Hive": "LocalMachine",
        "KeyPath": "SOFTWARE\\Microsoft\\Windows NT\\CurrentVersion\\Sensor\\Overrides\\{BFA794E4-F964-4FDB-90F6-51056BFE4B44}",
        "ValueName": "SensorPermissionState",
        "Value": 0,
        "ValueType": "DWord",
        "Operation": "SetValue"
      },
      {
        "Hive": "LocalMachine",
        "KeyPath": "SYSTEM\\CurrentControlSet\\Services\\lfsvc\\Service\\Configuration",
        "ValueName": "Status",
        "Value": 0,
        "ValueType": "DWord",
        "Operation": "SetValue"
      },
      {
        "Hive": "LocalMachine",
        "KeyPath": "SYSTEM\\Maps",
        "ValueName": "AutoUpdateEnabled",
        "Value": 0,
        "ValueType": "DWord",
        "Operation": "SetValue"
      }
    ],
    "ServiceOperations": [],
    "FileOperations": [],
    "PowerShellOperations": []
  },
  "UndoOperations": {
    "RegistryOperations": [
      {
        "Hive": "LocalMachine",
        "KeyPath": "SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\CapabilityAccessManager\\ConsentStore\\location",
        "ValueName": "Value",
        "Value": "Allow",
        "ValueType": "String",
        "Operation": "SetValue"
      },
      {
        "Hive": "LocalMachine",
        "KeyPath": "SOFTWARE\\Microsoft\\Windows NT\\CurrentVersion\\Sensor\\Overrides\\{BFA794E4-F964-4FDB-90F6-51056BFE4B44}",
        "ValueName": "SensorPermissionState",
        "Value": 1,
        "ValueType": "DWord",
        "Operation": "SetValue"
      },
      {
        "Hive": "LocalMachine",
        "KeyPath": "SYSTEM\\CurrentControlSet\\Services\\lfsvc\\Service\\Configuration",
        "ValueName": "Status",
        "Value": 1,
        "ValueType": "DWord",
        "Operation": "SetValue"
      },
      {
        "Hive": "LocalMachine",
        "KeyPath": "SYSTEM\\Maps",
        "ValueName": "AutoUpdateEnabled",
        "Value": 1,
        "ValueType": "DWord",
        "Operation": "SetValue"
      }
    ],
    "ServiceOperations": [],
    "FileOperations": [],
    "PowerShellOperations": []
  },
  "DetectionRules": [
    {
      "Type": "Registry",
      "Hive": "LocalMachine",
      "KeyPath": "SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\CapabilityAccessManager\\ConsentStore\\location",
      "ValueName": "Value",
      "ExpectedValue": "Deny",
      "ValueType": "String"
    },
    {
      "Type": "Registry",
      "Hive": "LocalMachine",
      "KeyPath": "SOFTWARE\\Microsoft\\Windows NT\\CurrentVersion\\Sensor\\Overrides\\{BFA794E4-F964-4FDB-90F6-51056BFE4B44}",
      "ValueName": "SensorPermissionState",
      "ExpectedValue": 0,
      "ValueType": "DWord"
    },
    {
      "Type": "Registry",
      "Hive": "LocalMachine",
      "KeyPath": "SYSTEM\\CurrentControlSet\\Services\\lfsvc\\Service\\Configuration",
      "ValueName": "Status",
      "ExpectedValue": 0,
      "ValueType": "DWord"
    },
    {
      "Type": "Registry",
      "Hive": "LocalMachine",
      "KeyPath": "SYSTEM\\Maps",
      "ValueName": "AutoUpdateEnabled",
      "ExpectedValue": 0,
      "ValueType": "DWord"
    }
  ],
  "Authors": [
    {
      "Name": "Chris Titus",
      "Url": "https://github.com/ChrisTitusTech",
      "SupportUrl": "https://winutil.christitus.com/dev/tweaks/essential-tweaks/location",
      "Type": "Original",
      "Notes": "Original implementation from Chris Titus Tech's Windows utility for disabling location tracking"
    }
  ]
}